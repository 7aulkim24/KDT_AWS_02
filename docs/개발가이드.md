# ê°œë°œ ê°€ì´ë“œ
# ğŸ“š ëª©ì°¨

1. [ê°œë°œ ê³¼ì •](https://www.notion.so/2de5c2dfd5c2800a86aee81c6ffa58d2?pvs=21)
2. [ì£¼ìš” ì½”ë“œ ì„¤ëª…](https://www.notion.so/2de5c2dfd5c2800a86aee81c6ffa58d2?pvs=21)
3. [ë°°ìš´ ì ê³¼ íŒ](https://www.notion.so/2de5c2dfd5c2800a86aee81c6ffa58d2?pvs=21)

---

# ê°œë°œ ê³¼ì •

í”„ë¡œê·¸ë¨ì„ ì„¤ê³„í•˜ê³  êµ¬í˜„í•˜ëŠ” ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì„¤ê³„ ë° ì„¤ëª…í•©ë‹ˆë‹¤.

## 1ë‹¨ê³„: ë°ì´í„° ëª¨ë¸ ì„¤ê³„ ([models.py](http://models.py/))

**ì™œ ë¨¼ì € ë§Œë“¤ê¹Œ?**

- í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©í•  ë°ì´í„°ì˜ êµ¬ì¡°ë¥¼ ë¨¼ì € ì •ì˜í•´ì•¼ ë‹¤ë¥¸ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ê±´ë¬¼ì„ ì§€ì„ ë•Œ ì„¤ê³„ë„ë¥¼ ë¨¼ì € ê·¸ë¦¬ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤

**ë¬´ì—‡ì„ ë§Œë“¤ì—ˆë‚˜?**

```python
@dataclass
class PomodoroSession:
    id: int                # ì„¸ì…˜ ê³ ìœ  ë²ˆí˜¸
    title: str             # ì„¸ì…˜ ì œëª©
    focus_minutes: int     # ì§‘ì¤‘ ì‹œê°„
    break_minutes: int     # íœ´ì‹ ì‹œê°„
    rounds: int            # ë¼ìš´ë“œ ìˆ˜
    status: Literal["pending", "running", "completed"] = "pending"

```

**í•µì‹¬ í¬ì¸íŠ¸:**

- `@dataclass`: ë°ì´í„°ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤ë¥¼ ì‰½ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ë°ì½”ë ˆì´í„°
- íƒ€ì… íŒíŠ¸(`int`, `str` ë“±): ì–´ë–¤ ì¢…ë¥˜ì˜ ë°ì´í„°ê°€ ë“¤ì–´ê°ˆì§€ ëª…ì‹œ
- `Literal`: íŠ¹ì • ë¬¸ìì—´ë§Œ í—ˆìš© (ì˜¤íƒ€ ë°©ì§€)

## 2ë‹¨ê³„: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‘ì„± ([utils.py](http://utils.py/))

**ì™œ í•„ìš”í• ê¹Œ?**

- ìì£¼ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì€ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤
- ì½”ë“œ ì¤‘ë³µì„ ì¤„ì´ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›Œì§‘ë‹ˆë‹¤

**ì£¼ìš” í•¨ìˆ˜ 3ê°€ì§€:**

### 2-1. ì•ˆì „í•œ ì •ìˆ˜ ì…ë ¥ ë°›ê¸°

```python
def safe_int_input(prompt: str, min_value: int = 1) -> int:
    while True:
        try:
            value = int(input(prompt))
            if value < min_value:
                print(f"{min_value} ì´ìƒì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                continue
            return value
        except ValueError:
            print("ì˜¬ë°”ë¥¸ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
        except KeyboardInterrupt:
            print("\\nì…ë ¥ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.")
            raise

```

**ì™œ ì´ë ‡ê²Œ?**

- ì‚¬ìš©ìê°€ ë¬¸ìë¥¼ ì…ë ¥í•˜ë©´ `ValueError` ë°œìƒ â†’ ì˜ˆì™¸ ì²˜ë¦¬ë¡œ ë‹¤ì‹œ ì…ë ¥ ìš”ì²­
- ìŒìˆ˜ë‚˜ 0ì„ ì…ë ¥í•˜ë©´ â†’ ìµœì†Œê°’ ê²€ì¦ìœ¼ë¡œ ë‹¤ì‹œ ì…ë ¥ ìš”ì²­
- `Ctrl+C`ë¥¼ ëˆ„ë¥´ë©´ â†’ `KeyboardInterrupt` ì²˜ë¦¬

### 2-2. ì œë„ˆë ˆì´í„°ë¡œ ëª©ë¡ ì¶œë ¥

```python
def session_list_generator(sessions: List[PomodoroSession]) -> Iterator[str]:
    if not sessions:
        yield "ìƒì„±ëœ ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤."
        return

    yield from (str(session) for session in sessions)
    yield f"\\nì´ {len(sessions)}ê°œì˜ ì„¸ì…˜"

```

**ì œë„ˆë ˆì´í„°ë€?**

- ë°ì´í„°ë¥¼ í•œ ë²ˆì— ëª¨ë‘ ë§Œë“¤ì§€ ì•Šê³ , í•„ìš”í•  ë•Œë§ˆë‹¤ í•˜ë‚˜ì”© ìƒì„±
- ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- `yield`: ê°’ì„ ë°˜í™˜í•˜ì§€ë§Œ í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ì§€ ì•Šê³  ì¼ì‹œì •ì§€

**ì™œ ì œë„ˆë ˆì´í„°ë¥¼ ì‚¬ìš©í–ˆì„ê¹Œ?**

- ì„¸ì…˜ì´ 1000ê°œì—¬ë„ ë©”ëª¨ë¦¬ì— 1000ì¤„ì˜ ë¬¸ìì—´ì„ í•œ ë²ˆì— ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- í•œ ì¤„ì”© ì¶œë ¥í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½í•©ë‹ˆë‹¤

## 3ë‹¨ê³„: ì„¸ì…˜ ê´€ë¦¬ì ì‘ì„± (pomodoro_manager.py)

**ì—­í• :**

- ì„¸ì…˜ì˜ ìƒì„±, ì¡°íšŒ, ì‚­ì œ, ìƒíƒœ ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤

**í•µì‹¬ ê°œë…: í´ë˜ìŠ¤**

```python
class PomodoroManager:
    def __init__(self) -> None:
        self._sessions: Dict[int, PomodoroSession] = {}  # private ë³€ìˆ˜
        self._next_id: int = 1
        self._running_info: Optional[dict] = None

```

**ì™œ `_`(ì–¸ë”ìŠ¤ì½”ì–´)ë¥¼ ë¶™ì˜€ì„ê¹Œ?**

- Pythonì—ì„œ `_`ë¡œ ì‹œì‘í•˜ëŠ” ë³€ìˆ˜ëŠ” "ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•˜ì§€ ë§ˆì„¸ìš”"ë¼ëŠ” ì˜ë¯¸
- ë‚´ë¶€ ë°ì´í„°ë¥¼ ë³´í˜¸í•˜ê³ , ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼í•˜ë„ë¡ ê°•ì œ

**ì£¼ìš” ë©”ì„œë“œ:**

### 3-1. ì„¸ì…˜ ìƒì„±

```python
def create_session(
    self,
    title: str,
    focus_minutes: int,
    break_minutes: int,
    rounds: int
) -> PomodoroSession:
    # ì…ë ¥ ê²€ì¦
    if not title.strip():
        raise ValueError("ì„¸ì…˜ ì œëª©ì€ ë¹„ì–´ìˆì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    if focus_minutes < 1:
        raise ValueError("ì§‘ì¤‘ ì‹œê°„ì€ 1ë¶„ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.")

    # ì„¸ì…˜ ìƒì„±
    session = PomodoroSession(
        id=self._next_id,
        title=title.strip(),
        focus_minutes=focus_minutes,
        break_minutes=break_minutes,
        rounds=rounds,
        status="pending"
    )

    # ì €ì¥ ë° ID ì¦ê°€
    self._sessions[self._next_id] = session
    self._next_id += 1
    return session

```

**ì™œ ì´ë ‡ê²Œ?**

- ì…ë ¥ ê²€ì¦: ì˜ëª»ëœ ë°ì´í„°ê°€ ë“¤ì–´ì˜¤ë©´ ì¦‰ì‹œ ì—ëŸ¬ ë°œìƒ
- ID ìë™ ì¦ê°€: ì‚¬ìš©ìê°€ IDë¥¼ ì§ì ‘ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ë¨
- ë”•ì…”ë„ˆë¦¬ ì €ì¥: IDë¡œ ë¹ ë¥´ê²Œ ê²€ìƒ‰ ê°€ëŠ¥ (O(1) ì‹œê°„ë³µì¡ë„)

### 3-2. List Comprehension í™œìš©

```python
def get_pending_sessions(self) -> List[PomodoroSession]:
    return [s for s in self._sessions.values() if s.status == "pending"]

```

**ì¼ë°˜ forë¬¸ê³¼ ë¹„êµ:**

```python
# ì¼ë°˜ forë¬¸
def get_pending_sessions(self):
    result = []
    for s in self._sessions.values():
        if s.status == "pending":
            result.append(s)
    return result

# List Comprehension (ë” ê°„ê²°!)
def get_pending_sessions(self):
    return [s for s in self._sessions.values() if s.status == "pending"]

```

**ì¥ì :**

- ì½”ë“œê°€ ì§§ê³  ì§ê´€ì ì…ë‹ˆë‹¤
- ì‹¤í–‰ ì†ë„ë„ ì•½ê°„ ë” ë¹ ë¦…ë‹ˆë‹¤

### 3-3. ì‹¤í–‰ ì •ë³´ ê´€ë¦¬

```python
def set_running_info(self, session_id: int, phase: str, total_seconds: int) -> None:
    self._running_info = {
        'session_id': session_id,
        'phase': phase,
        'total_seconds': total_seconds,
        'start_time': datetime.now()  # ì‹œì‘ ì‹œê°„ ê¸°ë¡
    }

```

**ì™œ í•„ìš”í• ê¹Œ?**

- ì‹¤ì‹œê°„ìœ¼ë¡œ ì§„í–‰ ìƒí™©ì„ í‘œì‹œí•˜ë ¤ë©´ ì–¸ì œ ì‹œì‘í–ˆëŠ”ì§€ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤
- í˜„ì¬ ì‹œê°„ - ì‹œì‘ ì‹œê°„ = ê²½ê³¼ ì‹œê°„

```python
def get_running_info_string(self) -> Optional[str]:
    if not self._running_info:
        return None

    # ê²½ê³¼ ì‹œê°„ ê³„ì‚°
    elapsed = (datetime.now() - self._running_info['start_time']).total_seconds()
    elapsed = int(min(elapsed, self._running_info['total_seconds']))

    # 00:00 í˜•ì‹ìœ¼ë¡œ ë³€í™˜
    elapsed_str = f"{elapsed // 60:02d}:{elapsed % 60:02d}"
    total_str = f"{self._running_info['total_seconds'] // 60:02d}:{self._running_info['total_seconds'] % 60:02d}"

    phase_name = "ì§‘ì¤‘" if self._running_info['phase'] == "focus" else "íœ´ì‹"

    return f"[ì‹¤í–‰ ì¤‘] ì„¸ì…˜ {session.id} - {phase_name} | {elapsed_str} / {total_str}"

```

**í•µì‹¬ ê³„ì‚°:**

- `elapsed // 60`: ë¶„ ê³„ì‚° (123ì´ˆ â†’ 2ë¶„)
- `elapsed % 60`: ì´ˆ ê³„ì‚° (123ì´ˆ â†’ 3ì´ˆ)
- `:02d`: 2ìë¦¬ë¡œ í‘œì‹œ, ë¹ˆ ìë¦¬ëŠ” 0ìœ¼ë¡œ ì±„ì›€ (3 â†’ 03)

## 4ë‹¨ê³„: ë¹„ë™ê¸° ì‘ì—… êµ¬í˜„ (async_tasks.py)

**ë¹„ë™ê¸°(async)ë€?**

- ì¼ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì¼ì„ í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë°©ë²•
- ì˜ˆ: ì»¤í”¼ë¥¼ ë‚´ë¦¬ëŠ” ë™ì•ˆ(ê¸°ë‹¤ë¦¼) ë‹¤ë¥¸ ì¼ì„ í•  ìˆ˜ ìˆìŒ

**í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰:**

```python
async def run_pomodoro_background(
    session: PomodoroSession,
    pomodoro_manager: PomodoroManager
) -> None:
    try:
        # ìƒíƒœë¥¼ runningìœ¼ë¡œ ë³€ê²½
        pomodoro_manager.update_session_status(session.id, "running")

        for round_num in range(1, session.rounds + 1):
            # ì§‘ì¤‘ ì‹œê°„
            total_seconds = session.focus_minutes * 60
            pomodoro_manager.set_running_info(session.id, "focus", total_seconds)

            # 1ì´ˆì”© ëŒ€ê¸° (ë‹¤ë¥¸ ì‘ì—…ì´ ì‹¤í–‰ë  ìˆ˜ ìˆìŒ!)
            for _ in range(total_seconds):
                await asyncio.sleep(1)  # í•µì‹¬

            # íœ´ì‹ ì‹œê°„
            if round_num < session.rounds:
                total_seconds = session.break_minutes * 60
                pomodoro_manager.set_running_info(session.id, "break", total_seconds)

                for _ in range(total_seconds):
                    await asyncio.sleep(1)

        # ì™„ë£Œ ì²˜ë¦¬
        pomodoro_manager.clear_running_info()
        pomodoro_manager.update_session_status(session.id, "completed")

    except asyncio.CancelledError:
        # ì·¨ì†Œë˜ë©´ ë‹¤ì‹œ pending ìƒíƒœë¡œ
        pomodoro_manager.clear_running_info()
        pomodoro_manager.update_session_status(session.id, "pending")
        raise

```

**í•µì‹¬ ê°œë…:**

- `async def`: ë¹„ë™ê¸° í•¨ìˆ˜ ì •ì˜
- `await asyncio.sleep(1)`: 1ì´ˆ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì‘ì—…ì´ ì‹¤í–‰ ê°€ëŠ¥
- `asyncio.CancelledError`: ì‚¬ìš©ìê°€ ì·¨ì†Œí–ˆì„ ë•Œ ì²˜ë¦¬

**ì™œ 1ì´ˆì”© ê¸°ë‹¤ë¦´ê¹Œ?**

```python
# ë‚˜ìœ ì˜ˆ: í•œ ë²ˆì— 25ë¶„ ê¸°ë‹¤ë¦¬ê¸°
await asyncio.sleep(25 * 60)  # ì´ ë™ì•ˆ ì•„ë¬´ê²ƒë„ ëª»í•¨!

# ì¢‹ì€ ì˜ˆ: 1ì´ˆì”© 1500ë²ˆ ê¸°ë‹¤ë¦¬ê¸°
for _ in range(25 * 60):
    await asyncio.sleep(1)  # ë§¤ ì´ˆë§ˆë‹¤ ë‹¤ë¥¸ ì‘ì—… ê°€ëŠ¥!

```

- 1ì´ˆë§ˆë‹¤ í™”ë©´ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- 1ì´ˆë§ˆë‹¤ ì·¨ì†Œ ìš”ì²­ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

## 5ë‹¨ê³„: ë©”ì¸ í”„ë¡œê·¸ë¨ ì‘ì„± ([main.py](http://main.py/))

### 5-1. ë¹„ë™ê¸° ì…ë ¥ í•¨ìˆ˜

**ë¬¸ì œ:**

- ì¼ë°˜ `input()`ì€ ì…ë ¥ì„ ë°›ì„ ë•Œê¹Œì§€ í”„ë¡œê·¸ë¨ì´ ë©ˆì¶¥ë‹ˆë‹¤
- íƒ€ì´ë¨¸ê°€ ì‹¤í–‰ ì¤‘ì´ì–´ë„ í™”ë©´ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤

**í•´ê²°:**

```python
async def ainput(prompt: str = "") -> str:
    loop = asyncio.get_event_loop()
    return await loop.run_in_executor(None, partial(input, prompt))
```

**ì–´ë–»ê²Œ ì‘ë™í• ê¹Œ?**

1. `input()`ì„ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
2. ì…ë ¥ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ë¹„ë™ê¸° ì‘ì—…ì´ ì‹¤í–‰ë¨
3. ì…ë ¥ì´ ì™„ë£Œë˜ë©´ ê²°ê³¼ë¥¼ ë°˜í™˜

### 5-2. ì‹¤ì‹œê°„ í™”ë©´ ê°±ì‹ 

```python
async def screen_refresher() -> None:
    last_info = None
    while True:
        await asyncio.sleep(1)  # 1ì´ˆë§ˆë‹¤ í™•ì¸

        running_info = pomodoro_manager.get_running_info_string()

        # ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œë§Œ í™”ë©´ ê°±ì‹ 
        if running_info != last_info and running_info is not None:
            show_menu()
            print("\\në©”ë‰´ ì„ íƒ (0-4): ", end="", flush=True)
            last_info = running_info
```

**ì™œ `last_info`ë¥¼ ì €ì¥í• ê¹Œ?**

- ìƒíƒœê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ëŠ”ë° ê³„ì† í™”ë©´ì„ ì§€ìš°ë©´ ê¹œë¹¡ê±°ë¦¼
- ë³€ê²½ëœ ê²½ìš°ì—ë§Œ ê°±ì‹ í•˜ì—¬ ë” ë¶€ë“œëŸ¬ìš´ ê²½í—˜ ì œê³µ

**`flush=True`ëŠ” ì™œ í•„ìš”í• ê¹Œ?**

- Pythonì€ ì¶œë ¥ì„ ë²„í¼ì— ëª¨ì•˜ë‹¤ê°€ í•œ ë²ˆì— ì¶œë ¥
- `flush=True`ë¥¼ ì‚¬ìš©í•˜ë©´ ì¦‰ì‹œ ì¶œë ¥

### 5-3. ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—… ë™ì‹œ ì‹¤í–‰

```python
async def main_menu() -> NoReturn:
    global current_task

    # í™”ë©´ ê°±ì‹  íƒœìŠ¤í¬ ì‹œì‘
    refresh_task = asyncio.create_task(screen_refresher())

    try:
        while True:
            show_menu()
            choice = (await ainput("\\në©”ë‰´ ì„ íƒ (0-4): ")).strip()

            if choice == "2":  # í¬ëª¨ë„ë¡œ ì‹¤í–‰
                current_task = asyncio.create_task(
                    run_pomodoro_background(session, pomodoro_manager)
                )
                await asyncio.sleep(0.1)  # íƒœìŠ¤í¬ê°€ ì‹œì‘ë  ì‹œê°„ ì œê³µ
    finally:
        # í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œ íƒœìŠ¤í¬ ì •ë¦¬
        refresh_task.cancel()
```

**ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ê²ƒë“¤:**

1. `screen_refresher()`: 1ì´ˆë§ˆë‹¤ í™”ë©´ ê°±ì‹ 
2. `run_pomodoro_background()`: í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸ ì‹¤í–‰
3. `ainput()`: ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸°

**í•µì‹¬ íŒ¨í„´:**

```python
# íƒœìŠ¤í¬ ìƒì„±
task = asyncio.create_task(some_async_function())

# íƒœìŠ¤í¬ ì·¨ì†Œ
task.cancel()
try:
    await task
except asyncio.CancelledError:
    pass  # ì·¨ì†Œëœ ê²ƒì€ ì •ìƒ
```

---

# ì£¼ìš” ì½”ë“œ ì„¤ëª…

## 1. ë°ì´í„° í´ë˜ìŠ¤ (@dataclass)

```python
@dataclass
class PomodoroSession:
    id: int
    title: str
    focus_minutes: int
    break_minutes: int
    rounds: int
    status: Literal["pending", "running", "completed"] = "pending"

    def __str__(self) -> str:
        return f"ì„¸ì…˜ {self.id} [{self.title}]..."
```

**ì¥ì :**

- `__init__` ìë™ ìƒì„±
- íƒ€ì… íŒíŠ¸ë¡œ ê°€ë…ì„± í–¥ìƒ
- ì½”ë“œê°€ ì§§ê³  ëª…í™•

## 2. íƒ€ì… íŒíŠ¸ (Type Hints)

```python
# íƒ€ì… íŒíŠ¸ ì—†ì´
def create_session(self, title, focus_minutes, break_minutes, rounds):
    ...

# íƒ€ì… íŒíŠ¸ ì‚¬ìš©
def create_session(
    self,
    title: str,           # titleì€ ë¬¸ìì—´
    focus_minutes: int,   # focus_minutesëŠ” ì •ìˆ˜
    break_minutes: int,
    rounds: int
) -> PomodoroSession:     # ë°˜í™˜ê°’ì€ PomodoroSession
    ...

```

**ì¥ì :**

1. ì½”ë“œ ì½ê¸°ê°€ ì‰¬ì›€ (ë¬¸ì„œ ì—­í• )
2. IDEê°€ ìë™ì™„ì„± ì œê³µ
3. ë²„ê·¸ë¥¼ ë¯¸ë¦¬ ë°œê²¬ ê°€ëŠ¥

**ê³ ê¸‰ íƒ€ì…:**

```python
from typing import Optional, List, Dict, Literal

Optional[str]  # str ë˜ëŠ” None
List[int]      # intë¡œ ì´ë£¨ì–´ì§„ ë¦¬ìŠ¤íŠ¸
Dict[int, PomodoroSession]  # intë¥¼ keyë¡œ í•˜ëŠ” ë”•ì…”ë„ˆë¦¬
Literal["pending", "running", "completed"]  # íŠ¹ì • ë¬¸ìì—´ë§Œ
```

## 3. ì˜ˆì™¸ ì²˜ë¦¬ (Exception Handling)

**ì™œ í•„ìš”í• ê¹Œ?**

- í”„ë¡œê·¸ë¨ì´ ê°‘ìê¸° ì¢…ë£Œë˜ëŠ” ê²ƒì„ ë°©ì§€
- ì‚¬ìš©ìì—ê²Œ ì¹œì ˆí•œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ

**ê¸°ë³¸ íŒ¨í„´:**

```python
try:
    # ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì½”ë“œ
    value = int(input("ìˆ«ì ì…ë ¥: "))
except ValueError:
    # ValueErrorê°€ ë°œìƒí•˜ë©´ ì—¬ê¸° ì‹¤í–‰
    print("ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”!")
except KeyboardInterrupt:
    # Ctrl+Cë¥¼ ëˆŒë €ì„ ë•Œ
    print("\\nì…ë ¥ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.")
    raise  # ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë°œìƒì‹œì¼œ ìƒìœ„ë¡œ ì „ë‹¬
finally:
    # ì˜¤ë¥˜ ë°œìƒ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ í•­ìƒ ì‹¤í–‰
    print("ì •ë¦¬ ì‘ì—…")

```

**raiseì˜ ì˜ë¯¸:**

- `raise`: ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë°œìƒì‹œí‚´
- `raise ValueError("ë©”ì‹œì§€")`: ìƒˆë¡œìš´ ì˜ˆì™¸ ë°œìƒ

## 4. ì œë„ˆë ˆì´í„° (Generator)

**yield from ì‚¬ìš©:**

```python
def session_list_generator(sessions):
    # ì´ë ‡ê²Œ ì“°ë©´
    for session in sessions:
        yield str(session)

    # ì´ë ‡ê²Œ ì¤„ì¼ ìˆ˜ ìˆìŒ!
    yield from (str(session) for session in sessions)
```

## 5. List Comprehension

**ê¸°ë³¸ í˜•íƒœ:**

```python
# ì¼ë°˜ forë¬¸
result = []
for i in range(10):
    if i % 2 == 0:
        result.append(i * 2)

# List Comprehension
result = [i * 2 for i in range(10) if i % 2 == 0]
```

**êµ¬ì¡°:**

```python
[í‘œí˜„ì‹ for í•­ëª© in ë°˜ë³µê°€ëŠ¥ê°ì²´ if ì¡°ê±´]
 â†“     â†“           â†“          â†“
 ë³€í™˜   ë³€ìˆ˜       ë°ì´í„°      í•„í„°
```

**ì‹¤ì œ ì‚¬ìš© ì˜ˆ:**

```python
# pending ìƒíƒœì¸ ì„¸ì…˜ë§Œ ì¶”ì¶œ
pending = [s for s in self._sessions.values() if s.status == "pending"]

# ì„¸ì…˜ IDë§Œ ì¶”ì¶œ
ids = [s.id for s in self._sessions.values()]

# ì„¸ì…˜ ì œëª©ì„ ëŒ€ë¬¸ìë¡œ ë³€í™˜
titles = [s.title.upper() for s in self._sessions.values()]
```

## 6. ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë° (asyncio)

**ê°œë… ì´í•´í•˜ê¸°:**

```python
# ë™ê¸°(ì¼ë°˜) ë°©ì‹
def make_coffee():
    print("ë¬¼ ë“ì´ê¸° ì‹œì‘")
    time.sleep(60)  # 60ì´ˆ ë™ì•ˆ ëŒ€ê¸° (ì•„ë¬´ê²ƒë„ ëª»í•¨!)
    print("ì»¤í”¼ ì™„ì„±")

def check_email():
    print("ì´ë©”ì¼ í™•ì¸")

# ìˆœì°¨ì  ì‹¤í–‰
make_coffee()      # 60ì´ˆ ì†Œìš”
check_email()      # ê·¸ ë‹¤ìŒì— ì‹¤í–‰
# ì´ 60ì´ˆ ì´ìƒ ì†Œìš”

```

```python
# ë¹„ë™ê¸° ë°©ì‹
async def make_coffee():
    print("ë¬¼ ë“ì´ê¸° ì‹œì‘")
    await asyncio.sleep(60)  # ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì‘ì—… ê°€ëŠ¥!
    print("ì»¤í”¼ ì™„ì„±")

async def check_email():
    print("ì´ë©”ì¼ í™•ì¸")

# ë™ì‹œ ì‹¤í–‰
async def main():
    task1 = asyncio.create_task(make_coffee())
    task2 = asyncio.create_task(check_email())
    await task1
    await task2

asyncio.run(main())
# ì´ë©”ì¼ í™•ì¸ì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œ ì‹¤í–‰!
```

**í•µì‹¬ í‚¤ì›Œë“œ:**

- `async def`: ë¹„ë™ê¸° í•¨ìˆ˜ ì •ì˜
- `await`: ë¹„ë™ê¸° ì‘ì—… ì™„ë£Œê¹Œì§€ ëŒ€ê¸° (ë‹¤ë¥¸ ì‘ì—…ì€ ì‹¤í–‰ ê°€ëŠ¥)
- `asyncio.create_task()`: ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ì‹œì‘
- `asyncio.run()`: ë¹„ë™ê¸° í•¨ìˆ˜ ì‹¤í–‰

**ì‹¤ì œ ì ìš©:**

```python
# í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ë©´ì„œ
# ë©”ë‰´ ì…ë ¥ì„ ë™ì‹œì— ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!
async def main_menu():
    # 1. í™”ë©´ ê°±ì‹  íƒœìŠ¤í¬ ì‹œì‘
    refresh_task = asyncio.create_task(screen_refresher())

    # 2. í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸ ì‹œì‘
    timer_task = asyncio.create_task(run_pomodoro_background(session, manager))

    # 3. ë™ì‹œì— ì‚¬ìš©ì ì…ë ¥ ë°›ê¸°
    choice = await ainput("ë©”ë‰´ ì„ íƒ: ")

    # ì„¸ ê°€ì§€ê°€ ë™ì‹œì— ì‹¤í–‰
```

---

# ë°°ìš´ ì ê³¼ íŒ

## ğŸ’¡ ì„¤ê³„ ì›ì¹™

### 1. ë‹¨ì¼ ì±…ì„ ì›ì¹™

ê° íŒŒì¼/í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì—­í• ë§Œ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```
models.py          â†’ ë°ì´í„° êµ¬ì¡° ì •ì˜
utils.py           â†’ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
pomodoro_manager.py â†’ ì„¸ì…˜ ê´€ë¦¬
async_tasks.py     â†’ ë¹„ë™ê¸° ì‘ì—…
main.py            â†’ UI ë° ì‹¤í–‰
```

### 2. í•¨ìˆ˜ëŠ” ì‘ê³  ëª…í™•í•˜ê²Œ

```python
# ë‚˜ìœ ì˜ˆ: í•œ í•¨ìˆ˜ê°€ ë„ˆë¬´ ë§ì€ ì¼ì„ í•¨
def do_everything():
    create_session()
    run_session()
    display_menu()
    ...

# ì¢‹ì€ ì˜ˆ: ê°ê° ë¶„ë¦¬
def create_session(): ...
def run_session(): ...
def display_menu(): ...
```

### 3. ë³€ìˆ˜ëª…ì€ ëª…í™•í•˜ê²Œ

```python
# ë‚˜ìœ ì˜ˆ
s = get_s()
t = datetime.now()

# ì¢‹ì€ ì˜ˆ
session = get_session()
start_time = datetime.now()
```

## ğŸ”§ ë””ë²„ê¹… íŒ

### 1. print() ë””ë²„ê¹…

```python
def create_session(title, focus_minutes, ...):
    print(f"DEBUG: title={title}, focus={focus_minutes}")  # í™•ì¸ìš©
    ...
```

### 2. íƒ€ì… ì²´í¬

```python
def process_session(session):
    print(f"DEBUG: type={type(session)}, value={session}")
    ...
```

### 3. try-exceptë¡œ ì˜¤ë¥˜ ì¡ê¸°

```python
try:
    risky_operation()
except Exception as e:
    print(f"ì˜¤ë¥˜ ë°œìƒ: {e}")
    import traceback
    traceback.print_exc()  # ìƒì„¸í•œ ì˜¤ë¥˜ ì •ë³´
```

# ğŸ“š ì¶”ê°€ í•™ìŠµ

### ê°œë…ë³„ í•™ìŠµ ìˆœì„œ

1. **ê¸°ì´ˆ**: ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤
2. **ì¤‘ê¸‰**: ì œë„ˆë ˆì´í„°, ì»´í”„ë¦¬í—¨ì…˜, ë°ì½”ë ˆì´í„°
3. **ê³ ê¸‰**: ë¹„ë™ê¸°, íƒ€ì… íŒíŠ¸, ë””ìì¸ íŒ¨í„´

### ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´

ì´ í”„ë¡œì íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°œì „ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì•„ì´ë””ì–´:

1. **ë°ì´í„° ì €ì¥**
    - JSON íŒŒì¼ë¡œ ì„¸ì…˜ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
    - SQLite ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©
2. **ì•Œë¦¼ ê¸°ëŠ¥**
    - í¬ëª¨ë„ë¡œ ì™„ë£Œ ì‹œ ì†Œë¦¬ ì¬ìƒ
    - ì‹œìŠ¤í…œ ì•Œë¦¼ í‘œì‹œ
3. **í†µê³„ ê¸°ëŠ¥**
    - í•˜ë£¨/ì£¼/ì›”ë³„ í†µê³„
    - ê·¸ë˜í”„ë¡œ ì‹œê°í™”
4. **ì›¹ ë²„ì „**
    - Flask/FastAPIë¡œ ì›¹ ì„œë²„ êµ¬ì¶•
    - ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš© ê°€ëŠ¥

---

# ë§ˆì¹˜ë©°

ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ë‹¤ìŒì„ ë°°ì› ìŠµë‹ˆë‹¤:

âœ… **ëª¨ë“ˆí™”**: ì½”ë“œë¥¼ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬

âœ… **íƒ€ì… íŒíŠ¸**: ì½”ë“œë¥¼ ë” ì•ˆì „í•˜ê³  ì½ê¸° ì‰½ê²Œ

âœ… **ì˜ˆì™¸ ì²˜ë¦¬**: ì˜¤ë¥˜ë¥¼ ìš°ì•„í•˜ê²Œ ì²˜ë¦¬

âœ… **ì œë„ˆë ˆì´í„°**: ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ë°ì´í„° ìƒì„±

âœ… **ë¹„ë™ê¸°**: ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—… ì‹¤í–‰

âœ… **List Comprehension**: ê°„ê²°í•œ ë°ì´í„° ì²˜ë¦¬

**ê°€ì¥ ì¤‘ìš”í•œ ê²ƒ:**

- ì²˜ìŒë¶€í„° ì™„ë²½í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤
- ì‘ì€ ê¸°ëŠ¥ë¶€í„° êµ¬í˜„í•˜ê³  ì ì§„ì ìœ¼ë¡œ ë°œì „ì‹œí‚µë‹ˆë‹¤
- ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , í…ŒìŠ¤íŠ¸í•˜ê³ , ê°œì„ í•˜ëŠ” ê³¼ì •ì„ ë°˜ë³µí•©ë‹ˆë‹¤
